# WineBot Status - 2026-02-08

## Current State
- **Architecture:** Major modularization of the API (`api/server.py` split into routers/core/utils) and Entrypoint logic (`scripts/init/*.sh`).
- **Policy:** "User Always Wins" Interactive Policy is hardened and verified. The `InputBroker` manages control leases effectively.
- **Security:** Strict version pinning implemented for OS (Digest), Python (Requirements), and Windows Tools (Versioned URLs). Configuration persistence hardened via `/wineprefix/winebot.env` with `0600` permissions.
- **CI/CD:** Refactored `.github/workflows/release.yml` into granular capability-based stages (Boot, API, Automation, Tracing, Recording).
- **Diagnostics:** `diagnose-master.sh` is now the primary internal engine for verification, supporting phased execution.

## Accomplishments Today
1. **API Modularization:** Split 2800-line monolith into a clean package structure.
2. **CI Pipeline:** granularized tests to provide fail-fast feedback and clear visibility into feature breakage.
3. **Hardening:** Fixed `gosu` privilege dropping, restricted `/wineprefix` permissions, and secured the `winebotctl` config stack.
4. **Agent Map:** Created `AGENTS.md` to assist future coding agents in navigating the codebase efficiently.
5. **Session ID Fixes:** Dashboard now supports historical artifact visibility across container restarts.

## Next Steps
1. **Merge & Release:** Merge `release/v0.9.0` into `main` and tag the release.
2. **Expansion:** Investigate multi-monitor/Xinerama support for expanded automation canvas.
3. **Observability:** Enhance the Dashboard with real-time trace visualization (moving from crosshair to event stream).

## Session Relevant Items
- **Branch:** `release/v0.9.0`
- **Verification:** All tests passed (Unit, Smoke, CV) after fixing import and permission gaps.
- **Environment:** Resolution standardized at 1280x720x24.